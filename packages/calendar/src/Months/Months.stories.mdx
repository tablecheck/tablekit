import { Meta, Story, Canvas } from '@storybook/addon-docs/blocks';
import { action } from '@storybook/addon-actions';
import styled from '@emotion/styled';
import { Months } from './index';
import { Root } from '../Root';

<Meta
  title="Components/Calendar/Months"
  component={Months}
  parameters={{
    options: { isToolshown: true }
  }}
/>

export const MonthsWrapper = styled.div`
  display: flex;
  flex-direction: row;
  flex-wrap: wrap;
  border: 1px blue solid;
`;

export const onDateSelected = action('onDateSelected');

export const StoryRoot = (props) => (
  <Root
    {...props}
    onDateSelected={(dateObject) => onDateSelected(dateObject)}
  />
);

The `Months` export of the date picker supports rendering the multiple months, it expects the same properties that `useDayzed` will return.

Note that the className passed to Months is applied to all the Month children as there is no top level wrapper, see `renderMonthHeader` for an example.

<Canvas>
  <Story name="Basic Month">
    <StoryRoot>
      <MonthsWrapper>
        <Months />
      </MonthsWrapper>
    </StoryRoot>
  </Story>
</Canvas>

## a11y

There are several props available for i18n/a11y purposes as outlined below, it's recommended you correctly implement these according to your application.
Try turning your screen reader on and tabbing/clicking into the following examples to see the differences between them.

### `composeDateAria`

<Canvas>
  <Story name="Custom Day aria">
    <StoryRoot
      composeDateAria={(date) => {
        const day = date.getDate();
        if (day === 1) return '1st';
        if (day === 2) return '2nd';
        if (day === 3) return '3rd';
        return `${day}th`;
      }}
    >
      <MonthsWrapper>
        <Months />
      </MonthsWrapper>
    </StoryRoot>
  </Story>
</Canvas>

### `monthAriaLabel`

For `monthAriaLabel` is used for a11y compatibility, it is used to indicate to the user which month and year is currently being displayed.
The default is to display the year and month numerically but it is highly recommended this is localised in the application to assist users.

<Canvas>
  <Story name="Month Aria Label">
    <StoryRoot>
      <MonthsWrapper>
        <Months
          monthAriaLabel={(calendar) =>
            `${calendar.year}-${calendar.month + 1}`
          }
        />
      </MonthsWrapper>
    </StoryRoot>
  </Story>
</Canvas>

### `renderMonthHeader`

Optionally a month header can be rendered to give visual aid to multiple calendars.

export const StyledMonths = styled(Months)`
  border: 1px solid green;
  margin: 16px;
`;

<Canvas>
  <Story name="Custom Month Header">
    <StoryRoot monthsToDisplay={4}>
      <MonthsWrapper>
        <StyledMonths
          renderMonthHeader={(calendar, id) => (
            <h3 id={id}>
              {calendar.year}-{calendar.month + 1}
            </h3>
          )}
        />
      </MonthsWrapper>
    </StoryRoot>
  </Story>
</Canvas>

### `renderWeekdayHeader`

<Canvas>
  <Story name="Custom Weekday Header">
    <StoryRoot>
      <MonthsWrapper>
        <Months renderWeekdayHeader={(dayOfWeek) => `Day ${dayOfWeek + 1}`} />
      </MonthsWrapper>
    </StoryRoot>
  </Story>
</Canvas>

### `calendarRoleDescription`

<Canvas>
  <Story name="Calendar Aria Role Description">
    <StoryRoot>
      <MonthsWrapper>
        <Months calendarRoleDescription="A Nice Calendar" />
      </MonthsWrapper>
    </StoryRoot>
  </Story>
</Canvas>
